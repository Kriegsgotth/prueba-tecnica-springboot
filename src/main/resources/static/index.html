<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Registro de Usuarios</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 40px;
        background-color: #f4f4f9;
        align-content: center;
      }
      h2 {
        color: #333;
      }
      input {
        margin: 5px 0;
        padding: 5px;
        width: 200px;
      }
      button {
        padding: 5px 10px;
        margin-top: 10px;
        cursor: pointer;
      }
      ul {
        margin-top: 10px;
        padding-left: 20px;
      }
      .container {
        max-width: 400px;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <center>
      <div class="container">
        <h2>Registrar Usuario</h2>
        <input type="number" id="id" placeholder="ID" /><br />
        <input type="text" id="name" placeholder="Nombre" /><br />
        <input type="email" id="email" placeholder="Email" /><br />
        <button onclick="registrarUsuario()">Registrar</button>

        <h2>Usuarios Registrados</h2>
        <button onclick="listarUsuarios()">Mostrar Usuarios</button>
        <ul id="usuarios"></ul>
      </div>

      <script>
        const API_URL = "http://localhost:8080/users";

        function registrarUsuario() {
          const user = {
            id: parseInt(document.getElementById("id").value),
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
          };

          fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(user),
          })
            .then((res) => res.json())
            .then((data) => alert(data.message || data.error))
            .catch((err) => alert("Error al registrar usuario: " + err));
        }

        function listarUsuarios() {
          fetch(API_URL)
            .then((res) => res.json())
            .then((users) => {
              const ul = document.getElementById("usuarios");
              ul.innerHTML = "";
              users.forEach((u) => {
                const li = document.createElement("li");
                li.textContent = `${u.id} - ${u.name} (${u.email})`;
                ul.appendChild(li);
              });
            })
            .catch((err) => alert("Error al obtener usuarios: " + err));
        }
      </script>
    </center>
  </body>
</html>
